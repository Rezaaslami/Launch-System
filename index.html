<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستم رای‌دهی</title>
    <style>
        .div1 {
            margin: 80px auto;
            border: 1px solid;
            width: 500px;
            text-align: center;
            padding: 20px;
        }

        #votingList {
            list-style: none; /* حذف نقاط بولت */
            padding: 0;
            margin: 0;
        }

        #votingList li {
            position: relative;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
        }

        #votingList img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="div1">
        <h1>سیستم رای‌دهی</h1>
        <h3>لطفا به یکی از افراد زیر رای دهید و نظر خود را وارد کنید:</h3>
        <ul id="votingList">
            <li>
                <img style="width: 60px; height:60px;" src="./1 (1).jpg" alt="علی">
                <button id="voteAli" onclick="vote('Ali')">رای به علی</button>
                <span id="AliVotes">0</span> آرا
            </li>
            <li>
                <img style="width: 60px; height:60px;" src="./1 (1).png" alt="حامد">
                <button id="voteSara" onclick="vote('Sara')">رای به سارا</button>
                <span id="SaraVotes">0</span> آرا
            </li>
            <li>
                <img style="width: 60px; height:60px;" src="./1 (2).jpg" alt="رضا">
                <button id="voteReza" onclick="vote('Reza')">رای به رضا</button>
                <span id="RezaVotes">0</span> آرا
            </li>
        </ul>
        <h3>نتایج رای‌دهی:</h3>
        <div id="results">
            <p>تعداد آرا برای علی: <span id="AliResult">0</span></p>
            <p>تعداد آرا برای سارا: <span id="SaraResult">0</span></p>
            <p>تعداد آرا برای رضا: <span id="RezaResult">0</span></p>
        </div>
        <div>
            <textarea id="userComment" ></textarea>
        </div>
    </div>

    <script>
        let votes = {
            'Ali': 0,
            'Sara': 0,
            'Reza': 0
        };

        if (localStorage.getItem('hasVoted') === 'true') {
            disableVoting();
        }

        function vote(candidate) {
            if (localStorage.getItem('hasVoted') === 'true') {
                alert("شما قبلاً رای داده‌اید.");
                return;
            }

            const comment = document.getElementById("userComment").value.trim();
            if (!comment) {
                alert("لطفاً نظر خود را وارد کنید.");
                return;
            }

            votes[candidate]++;
            localStorage.setItem('hasVoted', 'true');
            localStorage.setItem(candidate, votes[candidate]);
            localStorage.setItem('userComment', comment);

            document.getElementById(candidate + "Votes").innerText = votes[candidate];
            document.getElementById(candidate + "Result").innerText = votes[candidate];

            alert("رای شما ثبت شد. نظر شما: " + comment);
            disableVoting();
        }

        function disableVoting() {
            document.getElementById('voteAli').disabled = true;
            document.getElementById('voteSara').disabled = true;
            document.getElementById('voteReza').disabled = true;
            document.getElementById('userComment').disabled = true;
        }

        window.onload = function() {
            if (localStorage.getItem('hasVoted') === 'true') {
                votes['Ali'] = parseInt(localStorage.getItem('Ali') || 0);
                votes['Sara'] = parseInt(localStorage.getItem('Sara') || 0);
                votes['Reza'] = parseInt(localStorage.getItem('Reza') || 0);
                document.getElementById('AliVotes').innerText = votes['Ali'];
                document.getElementById('SaraVotes').innerText = votes['Sara'];
                document.getElementById('RezaVotes').innerText = votes['Reza'];
                document.getElementById('AliResult').innerText = votes['Ali'];
                document.getElementById('SaraResult').innerText = votes['Sara'];
                document.getElementById('RezaResult').innerText = votes['Reza'];

                const userComment = localStorage.getItem('userComment');
                if (userComment) {
                    document.getElementById('userComment').value = userComment;
                }

                disableVoting();
            }
        };
    </script>
</body>
</html>